<!--
File Name: Lab6.html
Student Name: Zach Warcola
Description: Project to explore use of SVG
-->

<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Lab06</title>
    <style>
      #div1 {
        border: 1px solid black;
        width: 600px;
        margin: 0 auto;  /* center content horizontally */
      }
    </style>

</head>
<body>
  <div id="div1">
    <svg id="cvs" width="600" height="500">

    </svg>
  </div>
  <script type="text/javascript">

    let byteCalculator = (function(){ //iife function to hold our code
      let byte = [0, 0, 0, 0, 0, 0, 0, 0];

      let createSVGElement = function(tag, attrs, innerHTML){ //helper function to create SVG elements
          let ns = "http://www.w3.org/2000/svg";
          let el = document.createElementNS(ns, tag);
          for (let attr in attrs) { el.setAttribute(attr, String(attrs[attr])); }
          if (innerHTML) { el.innerHTML = innerHTML; }
          return el;
      }

      let init = function(){ //creates and appends all SVG elements to <svg>.
        let svg = document.getElementById("cvs");
        let x = 125
        for(let i = 0; i <= 7; i++){
          let curr = createSVGElement('circle', {cx:x, cy:"250", r:"24", id:i, fill:'deepskyblue'});
          curr.addEventListener('click', toggle);
          svg.appendChild(curr);
          x += 50;
        }
        curr = createSVGElement('text', {x:'300', y:'200', fill:'black', id:'total'}, '0');
        svg.appendChild(curr);
      }

      let toggle = function(event){ //function that toggles byte array value based on user input

        let ev = event.target.id;
        switch(ev){
          case "0":
            if(byte[0] === 1){
              byte[0] = 0;
            }
            else{
              byte[0] = 1;
            }
            break;

          case "1":
            if(byte[1] === 1){
              byte[1] = 0;
            }
            else{
              byte[1] = 1;
            }
            break;

          case "2":
            if(byte[2] === 1){
              byte[2] = 0;
            }
            else{
              byte[2] = 1;
            }
            break;

          case "3":
            if(byte[3] === 1){
              byte[3] = 0;
            }
            else{
              byte[3] = 1;
            }
            break;

          case "4":
            if(byte[4] === 1){
              byte[4] = 0;
            }
            else{
              byte[4] = 1;
            }
            break;

          case "5":
            if(byte[5] === 1){
              byte[5] = 0;
            }
            else{
              byte[5] = 1;
            }
            break;

          case "6":
            if(byte[6] === 1){
              byte[6] = 0;
            }
            else{
              byte[6] = 1;
            }
            break;

          case "7":
            if(byte[7] === 1){
              byte[7] = 0;
            }
            else{
              byte[7] = 1;
            }
            break;

          default:
            console.log("whoops");
        }

        update();

      }

      let update = function(){ //function to update fill colors and display proper byte value
        for(let i in byte){
          let str = i.toString();
          let curr = document.getElementById(str);
          if(byte[i] === 1){
            curr.setAttribute('fill', 'red');
          }
          else{
            curr.setAttribute('fill', 'deepskyblue');
          }
        }
        calc(byte);
      }

      let calc = function(byte){ //calculation function to convert our byte array to a number
        let bitString = "";
        for(let i in byte){
          bitString += byte[i].toString();
        }
        let byteValue = parseInt(bitString, 2);
        document.getElementById('total').innerHTML = byteValue;
      }

      init();
    })();

  </script>
</body>
</html>
